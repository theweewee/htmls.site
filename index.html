<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ Editor HTML ao Vivo - HTMLS.SITE</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128 128'><text y='1.2em' font-size='90'>üöÄ</text></svg>">
    <style>
    html, body {
        width: 100vw;
        height: 100vh;
        margin: 0;
        padding: 0;
        overflow: hidden;
    }
    body {
        font-family: 'Inter', 'Segoe UI', 'Courier New', monospace;
        background: #101014;
        color: #e9e9ed;
        min-height: 100vh;
        min-width: 100vw;
        display: flex;
        flex-direction: column;
    }

    .header {
        background: #111117;
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 2.5px solid #32323c;
        box-shadow: 0 2px 8px #000c 0.06;
    }

    .header h1 {
        margin: 0;
        font-size: 1.5rem;
        font-weight: 700;
        letter-spacing: 1px;
    }

    /* Bot√£o de Importar Arquivos */
    .import-btn {
        background: #2a2a35;
        color: #09f38c;
        border: 1px solid #09f38c;
        padding: 8px 16px;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.2s;
        font-size: 0.9rem;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    .import-btn:hover {
        background: #09f38c;
        color: #111117;
    }

    .container {
        flex: 1;
        display: flex;
        flex-direction: row;
        min-height: 0;
        width: 100%;
        overflow: hidden;
        background: #17171c;
    }

    .editor-section {
        width: 50%;
        border-right: 2px solid #23232e;
        background: #17171c;
        display: flex;
        flex-direction: column;
    }

    .tabs {
        display: flex;
        background: #13131a;
        border-bottom: 2px solid #23232e;
    }

    .tab {
        flex: 1;
        padding: 12px 0;
        text-align: center;
        cursor: pointer;
        color: #b8b8d4;
        font-weight: 600;
        border-right: 1.5px solid #23232e;
        transition: 0.2s;
    }
    .tab:hover, .tab.active {
        background: #24243d;
        color: #09f38c;
    }

    textarea {
        flex: 1;
        background: #17171c;
        color: #e9e9ed;
        border: none;
        padding: 16px;
        font-family: 'Fira Mono', 'Consolas', monospace;
        font-size: 14px;
        line-height: 1.5;
        outline: none;
        resize: none;
    }

    .editor-panel { display: none; flex: 1; }
    .editor-panel.active { display: flex; flex-direction: column; }

    .preview-section {
        width: 50%;
        background: #fff;
        position: relative;
        display: flex;
        flex-direction: column;
    }

    iframe {
        width: 100%;
        height: 100%;
        border: none;
        display: block;
    }

    /* Lista de arquivos importados */
    #assets-list {
        position: absolute;
        top: 60px;
        right: 20px;
        background: #1e1e26;
        border: 1px solid #32323c;
        border-radius: 8px;
        width: 300px;
        max-height: 400px;
        overflow-y: auto;
        box-shadow: 0 10px 30px #0009;
        display: none;
        z-index: 100;
    }
    #assets-list.show { display: block; }
    
    .asset-item {
        padding: 10px;
        border-bottom: 1px solid #32323c;
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-size: 0.85rem;
    }
    .asset-item span {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        max-width: 180px;
    }
    .insert-btn {
        background: #3b3b4f;
        border: none;
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.75rem;
    }
    .insert-btn:hover { background: #09f38c; color: black; }
    .assets-header {
        padding: 10px;
        background: #111;
        border-bottom: 1px solid #32323c;
        font-weight: bold;
        display: flex;
        justify-content: space-between;
    }
    .close-assets { cursor: pointer; color: #ff5555; }

    @media (max-width: 900px) {
        .container { flex-direction: column; }
        .editor-section, .preview-section { width: 100%; height: 50%; }
    }

    ::-webkit-scrollbar { width: 6px; background: #111; }
    ::-webkit-scrollbar-thumb { background: #444; border-radius: 3px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üöÄ Editor HTMLS.SITE</h1>
        <!-- Input file escondido -->
        <input type="file" id="file-input" multiple style="display: none;">
        <button class="import-btn" onclick="document.getElementById('file-input').click()">
            üìÇ Importar Arquivos (Img/Audio)
        </button>
    </div>

    <!-- Painel Flutuante de Arquivos -->
    <div id="assets-list">
        <div class="assets-header">
            Arquivos Carregados
            <span class="close-assets" onclick="toggleAssets()">‚úñ</span>
        </div>
        <div id="assets-container">
            <!-- Lista ser√° preenchida via JS -->
        </div>
    </div>

    <div class="container">
        <div class="editor-section">
            <div class="tabs">
                <div class="tab active" data-tab="html">HTML</div>
                <div class="tab" data-tab="css">CSS</div>
                <div class="tab" data-tab="js">JavaScript</div>
            </div>
            <div class="editor-panel active" id="html-panel">
                <textarea id="html-code" placeholder="HTML...">
<h1>Teste de M√≠dia</h1>
<p>Use o bot√£o "Importar Arquivos" acima para adicionar GIFs ou √Åudios do seu PC.</p>

<!-- Exemplo ap√≥s importar: -->
<!-- <img src="blob:..." /> -->
                </textarea>
            </div>
            <div class="editor-panel" id="css-panel">
                <textarea id="css-code" placeholder="CSS...">
body {
    font-family: sans-serif;
    background: #f0f0f5;
    text-align: center;
    padding: 20px;
}
img {
    max-width: 100%;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}
audio {
    margin-top: 20px;
    width: 80%;
}
                </textarea>
            </div>
            <div class="editor-panel" id="js-panel">
                <textarea id="js-code" placeholder="JS...">
console.log('Editor pronto!');
                </textarea>
            </div>
        </div>
        <div class="preview-section">
            <iframe id="preview"></iframe>
        </div>
    </div>

    <script>
        const htmlCode = document.getElementById('html-code');
        const cssCode = document.getElementById('css-code');
        const jsCode = document.getElementById('js-code');
        const preview = document.getElementById('preview');
        const fileInput = document.getElementById('file-input');
        const assetsList = document.getElementById('assets-list');
        const assetsContainer = document.getElementById('assets-container');

        // --- L√≥gica de Abas ---
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.editor-panel').forEach(p => p.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById(`${tab.dataset.tab}-panel`).classList.add('active');
            });
        });

        // --- Atualiza√ß√£o ao Vivo ---
        function updatePreview() {
            const html = htmlCode.value;
            const css = `<style>${cssCode.value}</style>`;
            const js = `<script>${jsCode.value}<\/script>`;
            const fullCode = `
                <!DOCTYPE html>
                <html>
                <head><meta charset="UTF-8">${css}</head>
                <body>${html}${js}</body>
                </html>`;
            preview.srcdoc = fullCode;
        }

        [htmlCode, cssCode, jsCode].forEach(el => el.addEventListener('input', updatePreview));

        // --- L√≥gica de Importa√ß√£o de Arquivos (CORRE√á√ÉO 404) ---
        
        function toggleAssets() {
            assetsList.classList.toggle('show');
        }

        fileInput.addEventListener('change', function(e) {
            if (this.files.length > 0) {
                assetsList.classList.add('show'); // Mostra a lista
                Array.from(this.files).forEach(file => {
                    const url = URL.createObjectURL(file);
                    const item = document.createElement('div');
                    item.className = 'asset-item';
                    
                    // Detecta o tipo para criar a tag correta
                    let tagCode = '';
                    if (file.type.startsWith('image/')) {
                        tagCode = `<img src="${url}" alt="${file.name}" width="200">`;
                    } else if (file.type.startsWith('audio/')) {
                        tagCode = `<audio controls src="${url}"></audio>`;
                    } else if (file.type.startsWith('video/')) {
                        tagCode = `<video controls src="${url}" width="300"></video>`;
                    } else {
                        tagCode = `<a href="${url}" download="${file.name}">Baixar ${file.name}</a>`;
                    }

                    item.innerHTML = `
                        <span title="${file.name}">üìÑ ${file.name}</span>
                        <button class="insert-btn">Inserir no HTML</button>
                    `;

                    // Clique para inserir no c√≥digo
                    item.querySelector('.insert-btn').onclick = () => {
                        insertAtCursor(htmlCode, tagCode);
                        updatePreview();
                        // Muda para aba HTML se n√£o estiver
                        document.querySelector('[data-tab="html"]').click();
                    };

                    assetsContainer.appendChild(item);
                });
            }
        });

        // Fun√ß√£o auxiliar para inserir texto onde o cursor est√°
        function insertAtCursor(myField, myValue) {
            if (document.selection) {
                myField.focus();
                sel = document.selection.createRange();
                sel.text = myValue;
            } else if (myField.selectionStart || myField.selectionStart == '0') {
                var startPos = myField.selectionStart;
                var endPos = myField.selectionEnd;
                myField.value = myField.value.substring(0, startPos)
                    + "\n" + myValue + "\n"
                    + myField.value.substring(endPos, myField.value.length);
            } else {
                myField.value += myValue;
            }
        }

        updatePreview();
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>index.html</title>
    <style>

    </style>
</head>
<body>
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Editor HTML - htmls.site</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128 128'><text y='1.2em' font-size='90'>üöÄ</text></svg>">
    <style>
        :root {
            --bg-main: #101014;
            --bg-panel: #17171c;
            --bg-header: #111117;
            --border: #23232e;
            --accent: #6366f1;
            --accent-hover: #4f46e5;
            --text-main: #e9e9ed;
            --text-muted: #9ca3af;
            --success: #10b981;
            --danger: #ef4444;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        html, body {
            width: 100vw;
            height: 100vh;
            /* Suporte a altura din√¢mica mobile */
            height: 100dvh; 
            margin: 0;
            padding: 0;
            overflow: hidden; /* Impede scroll da p√°gina inteira */
            font-family: 'Inter', 'Segoe UI', sans-serif;
            background: var(--bg-main);
            color: var(--text-main);
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .header {
            background: var(--bg-header);
            padding: 0 16px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 50px;
            flex-shrink: 0;
        }
        .header h1 { font-size: 16px; margin: 0; font-weight: 700; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        /* Layout Principal */
        .main-container {
            flex: 1;
            display: flex;
            overflow: hidden;
            position: relative;
            /* Padr√£o Desktop: Lado a Lado */
            flex-direction: row; 
        }

        /* Coluna do Editor */
        .editor-section {
            width: 50%;
            display: flex;
            flex-direction: column;
            background: var(--bg-panel);
            min-width: 300px;
            z-index: 2;
        }

        /* Painel de Controles (Inputs e Bot√µes) */
        .controls-panel {
            padding: 10px;
            background: var(--bg-header);
            border-bottom: 1px solid var(--border);
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap; /* Permite quebrar linha no mobile */
            flex-shrink: 0;
        }
        
        .input-group { 
            display: flex; 
            flex-direction: column; 
            gap: 4px; 
            flex: 1; 
            min-width: 140px; /* Garante tamanho m√≠nimo */
        }
        .input-group label { font-size: 11px; color: var(--text-muted); }
        
        input[type="text"] {
            background: var(--bg-main);
            border: 1px solid var(--border);
            color: var(--text-main);
            padding: 8px 10px;
            border-radius: 6px;
            outline: none;
            font-size: 14px;
            width: 100%;
        }
        input[type="text"]:focus { border-color: var(--accent); }

        /* Toggle Auto-Template */
        .toggle-wrapper {
            display: flex; align-items: center; gap: 8px; background: #23232e;
            padding: 0 10px; border-radius: 6px; height: 38px; /* Altura alinhada com bot√µes */
        }
        .toggle-wrapper label { font-size: 12px; cursor: pointer; user-select: none; white-space: nowrap; }
        input[type="checkbox"] { width: 16px; height: 16px; margin: 0; }

        /* Bot√µes */
        .btn {
            padding: 0 12px; border-radius: 6px; border: none; font-weight: 600;
            cursor: pointer; font-size: 13px; transition: all 0.2s; height: 38px;
            display: flex; align-items: center; justify-content: center; gap: 5px;
            white-space: nowrap;
        }
        .btn-primary { background: var(--accent); color: white; flex-grow: 1; } /* Cresce no mobile */
        .btn-secondary { background: #2d2d3a; color: var(--text-muted); border: 1px solid var(--border); }
        
        /* Abas */
        .tabs { display: flex; background: var(--bg-header); border-bottom: 1px solid var(--border); flex-shrink: 0; overflow-x: auto; }
        .tab {
            flex: 1; padding: 10px; text-align: center; cursor: pointer; font-size: 12px;
            font-weight: 600; color: var(--text-muted); border-right: 1px solid var(--border);
            background: transparent; white-space: nowrap; min-width: 60px;
        }
        .tab.active { background: var(--bg-panel); color: var(--accent); border-bottom: 2px solid var(--accent); }

        /* Editor de C√≥digo */
        .editor-container {
            flex: 1; /* Ocupa o espa√ßo dispon√≠vel */
            position: relative;
            display: flex;
            flex-direction: column;
            min-height: 150px;
        }
        .code-area {
            width: 100%; height: 100%; background: var(--bg-panel); color: #e9e9ed;
            border: none; padding: 12px; font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 14px; line-height: 1.5; resize: none; outline: none; display: none;
            white-space: pre; overflow-wrap: normal; overflow-x: auto; /* Scroll horizontal no c√≥digo */
        }
        .code-area.active { display: block; }

        /* Gerenciador de Arquivos */
        .file-manager {
            height: 150px;
            background: #0d0d11;
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
            border-top: 1px solid var(--border);
        }
        .fm-header {
            padding: 8px 12px; display: flex; justify-content: space-between;
            align-items: center; background: #141419; border-bottom: 1px solid var(--border);
        }
        .file-list { flex: 1; overflow-y: auto; padding: 0; margin: 0; list-style: none; }
        .file-item {
            padding: 8px 12px; display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid #1f1f28;
        }
        .file-name { font-size: 13px; color: var(--accent); text-decoration: none; overflow: hidden; text-overflow: ellipsis; max-width: 180px; display: inline-block; vertical-align: middle; }
        
        /* Preview */
        .preview-section {
            width: 50%;
            background: #fff;
            display: flex;
            flex-direction: column;
            position: relative;
            min-width: 200px;
        }
        iframe { width: 100%; height: 100%; border: none; background: white; }

        /* Resizers */
        .resizer-horizontal {
            height: 6px; background: #000; border-top: 1px solid var(--border);
            border-bottom: 1px solid var(--border); cursor: row-resize; flex-shrink: 0; z-index: 10;
        }
        .resizer-vertical {
            width: 6px; background: #000; border-left: 1px solid var(--border);
            border-right: 1px solid var(--border); cursor: col-resize; flex-shrink: 0; z-index: 10;
        }
        .pointer-events-none { pointer-events: none; }

        /* Status Bar */
        .status-bar {
            position: absolute; bottom: 20px; right: 20px; padding: 10px 20px;
            border-radius: 30px; font-size: 13px; font-weight: 500; pointer-events: none;
            opacity: 0; transform: translateY(20px); transition: all 0.3s; z-index: 999;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5); text-align: center;
        }
        .status-bar.show { opacity: 1; transform: translateY(0); }
        .status-info { background: #3b82f6; color: white; }
        .status-success { background: var(--success); color: white; }
        .status-error { background: var(--danger); color: white; }

        /* =========================================
           MEDIA QUERY: CSS ESPEC√çFICO PARA CELULAR
           ========================================= */
        @media (max-width: 768px) {
            .main-container {
                flex-direction: column; /* Empilha um em cima do outro */
            }

            /* Editor ocupa a metade superior (ajust√°vel) */
            .editor-section {
                width: 100% !important; /* For√ßa largura total */
                height: 60%; /* Ocupa 60% da tela inicialmente */
                min-width: 0;
                flex: none; /* Respeita a altura definida via JS ou CSS */
            }

            /* Preview ocupa a metade inferior */
            .preview-section {
                width: 100% !important;
                flex: 1; /* Ocupa o resto */
                min-height: 100px;
                border-top: 4px solid var(--border); /* Divis√≥ria visual */
            }

            /* Ajustes de Controles para n√£o quebrar no canto */
            .controls-panel {
                padding: 8px;
                gap: 6px;
            }
            .input-group {
                min-width: 100%; /* Input ocupa a linha toda */
            }
            .btn {
                flex: 1; /* Bot√µes dividem espa√ßo */
                font-size: 12px;
            }
            .toggle-wrapper {
                flex: 1;
                justify-content: center;
            }
            
            /* Esconde resizer vertical (n√£o usa no mobile) */
            .resizer-vertical { display: none; }
            
            /* Aumenta √°rea de toque do resizer horizontal */
            .resizer-horizontal {
                height: 12px; /* Mais grosso para o dedo */
                background: #23232e;
                position: relative;
            }
            /* √çcone visual de "arrastar" */
            .resizer-horizontal::after {
                content: '‚Ä¢‚Ä¢‚Ä¢';
                color: #666;
                position: absolute;
                left: 50%; top: -4px;
                transform: translateX(-50%);
                letter-spacing: 2px;
            }

            /* Editor container flex√≠vel */
            .editor-container {
                height: auto;
                flex: 1; /* Garante que preencha o espa√ßo */
            }

            /* Gerenciador de arquivos menor */
            .file-manager {
                height: 120px;
            }
        }
    </style>
</head>
<body>

    <div class="header">
        <h1>üöÄ Editor - htmls.site</h1>
        <div id="status-display" class="status-bar">Pronto</div>
    </div>

    <div class="main-container" id="mainContainer">
        <div class="editor-section" id="editorSection">
            
            <div class="controls-panel">
                <div class="input-group">
                    <label for="filename">Nome do Arquivo</label>
                    <input type="text" id="filename" value="index.html" placeholder="ex: pagina.html">
                </div>
                
                <button id="openLiveBtn" class="btn btn-secondary" title="Ver Site">üåê Ver</button>

                <div class="toggle-wrapper" title="Auto-Template">
                    <input type="checkbox" id="useTemplate" checked>
                    <label for="useTemplate">Auto-Template</label>
                </div>

                <button id="publishBtn" class="btn btn-primary" disabled>üöÄ Publicar</button>
                <button id="newBtn" class="btn btn-secondary">‚ú® Novo</button>
            </div>

            <div class="tabs">
                <div class="tab active" data-target="html-code">HTML</div>
                <div class="tab" data-target="css-code">CSS</div>
                <div class="tab" data-target="js-code">JS</div>
            </div>

            <div class="editor-container" id="topPanel">
                <textarea id="html-code" class="code-area active" placeholder="Digite seu c√≥digo..."></textarea>
                <textarea id="css-code" class="code-area" placeholder="CSS"></textarea>
                <textarea id="js-code" class="code-area" placeholder="JS"></textarea>
            </div>

            <div class="resizer-horizontal" id="resizerH"></div>

            <div class="file-manager" id="bottomPanel">
                <div class="fm-header">
                    <span>Arquivos</span>
                    <button id="refreshBtn" class="btn-mini btn-secondary">‚Üª</button>
                </div>
                <ul id="fileList" class="file-list">
                    <li style="padding:16px; color:#666; text-align:center">Conectando...</li>
                </ul>
            </div>
        </div>

        <div class="resizer-vertical" id="resizerV"></div>

        <div class="preview-section" id="previewSection">
            <iframe id="preview"></iframe>
        </div>
    </div>

    <script>
        'use strict';

        const CONFIG = {
            repo: { 
                owner: 'theweewee',
                name: 'htmls.site',
                folder: 'htmls',
                branch: 'main' 
            },
            preview: { baseUrl: 'https://htmls.site' },
            
            // SEU DEPLOY HOOK (Verifique se colou certo)
            deployHookUrl: 'COLE_SUA_URL_AQUI', 

            jsonbin: { 
                binId: '691e49b043b1c97be9b81a9d', 
                accessKey: '$2a$10$f9KK7vSowGnJI5elo/dAPurqjZAJ3bJaWnsinl/caDfgIcNt28kNi' 
            },
            cache: { tokenKey: 'gh_token_v3', filesKey: 'gh_files_v3', duration: 1000 * 60 * 15 }
        };

        // ==========================================
        // JS LOGIC (Mesma l√≥gica anterior)
        // ==========================================
        async function triggerRenderDeploy() {
            if (!CONFIG.deployHookUrl || CONFIG.deployHookUrl.includes('COLE_SUA_URL')) {
                console.warn('URL do Deploy Hook n√£o configurada.');
                return;
            }
            try {
                await fetch(CONFIG.deployHookUrl, { method: 'POST' });
                console.log('Deploy disparado no Render!');
            } catch (e) {
                console.error('Erro ao disparar deploy:', e);
            }
        }

        const resizerV = document.getElementById('resizerV');
        const resizerH = document.getElementById('resizerH');
        const editorSection = document.getElementById('editorSection');
        const topPanel = document.getElementById('topPanel');
        const previewFrame = document.getElementById('preview');

        let isResizingV = false;
        resizerV.addEventListener('mousedown', (e) => {
            isResizingV = true;
            resizerV.classList.add('resizing');
            document.body.style.cursor = 'col-resize';
            previewFrame.classList.add('pointer-events-none');
        });

        let isResizingH = false;
        resizerH.addEventListener('mousedown', (e) => {
            isResizingH = true;
            resizerH.classList.add('resizing');
            document.body.style.cursor = 'row-resize';
            previewFrame.classList.add('pointer-events-none');
        });
        
        // Adicionando suporte a toque para celular (Touch Events)
        resizerH.addEventListener('touchstart', (e) => {
            isResizingH = true;
            resizerH.classList.add('resizing');
            previewFrame.classList.add('pointer-events-none');
            e.preventDefault(); // Evita scroll da tela
        });

        document.addEventListener('mousemove', handleMove);
        document.addEventListener('touchmove', (e) => {
            if(isResizingH) handleMove(e.touches[0]);
        });

        function handleMove(e) {
            if (isResizingV) {
                const newWidth = e.clientX;
                if (newWidth > 200 && newWidth < window.innerWidth - 200) {
                    editorSection.style.width = `${newWidth}px`;
                }
            }
            if (isResizingH) {
                // Ajuste para mobile vs desktop
                const rect = editorSection.getBoundingClientRect();
                // No mobile, o topPanel precisa respeitar o header e controles
                let offset = 120; 
                if(window.innerWidth < 768) offset = 150; // Mais espa√ßo para controles quebrados
                
                const newHeight = e.clientY - rect.top - offset;
                
                // Limites de tamanho
                if (newHeight > 50 && newHeight < rect.height - 50) {
                    topPanel.style.height = `${newHeight}px`;
                }
            }
        }

        document.addEventListener('mouseup', stopResize);
        document.addEventListener('touchend', stopResize);

        function stopResize() {
            isResizingV = false;
            isResizingH = false;
            resizerV.classList.remove('resizing');
            resizerH.classList.remove('resizing');
            document.body.style.cursor = 'default';
            previewFrame.classList.remove('pointer-events-none');
        }

        const htmlArea = document.getElementById('html-code');
        const cssArea = document.getElementById('css-code');
        const jsArea = document.getElementById('js-code');
        const filenameInput = document.getElementById('filename');
        const useTemplateCheckbox = document.getElementById('useTemplate');
        const openLiveBtn = document.getElementById('openLiveBtn');

        openLiveBtn.addEventListener('click', () => {
            const filename = filenameInput.value.trim();
            if(!filename) return;
            const url = `${CONFIG.preview.baseUrl}/${CONFIG.repo.folder}/${filename}`;
            window.open(url, '_blank');
        });

        function updatePreview() {
            let content;
            if (useTemplateCheckbox.checked) {
                const css = `<style>${cssArea.value}</style>`;
                const js = `<script>${jsArea.value}<` + `/script>`;
                content = `<!DOCTYPE html>
                <html lang="pt-BR">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    ${css}
                </head>
                <body>
                    ${htmlArea.value}
                    ${js}
                </body>
                </html>`;
            } else {
                content = htmlArea.value;
            }
            previewFrame.srcdoc = content;
        }

        function buildFinalContent() {
            if (!useTemplateCheckbox.checked) return htmlArea.value;
            return `<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${filenameInput.value}</title>
    <style>
${cssArea.value}
    </style>
</head>
<body>
${htmlArea.value}
    <script>
${jsArea.value}
    <` + `/script>
</body>
</html>`;
        }

        [htmlArea, cssArea, jsArea].forEach(el => el.addEventListener('input', updatePreview));
        useTemplateCheckbox.addEventListener('change', updatePreview);

        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.code-area').forEach(c => c.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById(tab.dataset.target).classList.add('active');
            });
        });

        class NotificationSystem {
            constructor() {
                this.el = document.getElementById('status-display');
                this.timer = null;
            }
            show(msg, type = 'info') {
                clearTimeout(this.timer);
                this.el.textContent = msg;
                this.el.className = `status-bar show status-${type}`;
                this.timer = setTimeout(() => this.el.classList.remove('show'), 4000);
            }
        }
        const notify = new NotificationSystem();

        class GitHubService {
            constructor() { this.token = null; }

            async init() {
                const cached = localStorage.getItem(CONFIG.cache.tokenKey);
                if (cached) {
                    const { token, time } = JSON.parse(cached);
                    if (Date.now() - time < CONFIG.cache.duration) {
                        this.token = token;
                        return;
                    }
                }
                try {
                    const res = await fetch(`https://api.jsonbin.io/v3/b/${CONFIG.jsonbin.binId}/latest`, {
                        headers: { 'X-Access-Key': CONFIG.jsonbin.accessKey, 'X-Bin-Meta': 'false' }
                    });
                    if (!res.ok) throw new Error('Falha ao autenticar');
                    const data = await res.json();
                    this.token = data.github_token;
                    localStorage.setItem(CONFIG.cache.tokenKey, JSON.stringify({ token: this.token, time: Date.now() }));
                } catch (e) {
                    console.error(e);
                    notify.show('Erro de Autentica√ß√£o', 'error');
                }
            }

            get headers() {
                return {
                    'Authorization': `Bearer ${this.token}`,
                    'Accept': 'application/vnd.github+json',
                    'Content-Type': 'application/json'
                };
            }

            async listFiles() {
                if (!this.token) await this.init();
                const url = `https://api.github.com/repos/${CONFIG.repo.owner}/${CONFIG.repo.name}/contents/${CONFIG.repo.folder}?ref=${CONFIG.repo.branch}`;
                const res = await fetch(url, { headers: this.headers });
                if (!res.ok) return [];
                const files = await res.json();
                return files.filter(f => f.name.endsWith('.html')).sort((a, b) => a.name.localeCompare(b.name));
            }

            async getFile(filename) {
                const url = `https://api.github.com/repos/${CONFIG.repo.owner}/${CONFIG.repo.name}/contents/${CONFIG.repo.folder}/${filename}`;
                const res = await fetch(url, { headers: this.headers });
                if (!res.ok) throw new Error('Arquivo n√£o encontrado');
                const data = await res.json();
                const content = decodeURIComponent(escape(atob(data.content.replace(/\s/g, ''))));
                return { content, sha: data.sha };
            }

            async saveFile(filename, content) {
                const path = `${CONFIG.repo.folder}/${filename}`;
                const url = `https://api.github.com/repos/${CONFIG.repo.owner}/${CONFIG.repo.name}/contents/${path}`;
                let sha = null;
                try {
                    const existing = await this.getFile(filename);
                    sha = existing.sha;
                } catch (e) {}

                const body = {
                    message: `Update ${filename} via Editor`,
                    content: btoa(unescape(encodeURIComponent(content))),
                    branch: CONFIG.repo.branch
                };
                if (sha) body.sha = sha;

                const res = await fetch(url, {
                    method: 'PUT',
                    headers: this.headers,
                    body: JSON.stringify(body)
                });
                if (!res.ok) throw new Error('Erro ao salvar');
                return await res.json();
            }

            async deleteFile(filename) {
                const file = await this.getFile(filename);
                const url = `https://api.github.com/repos/${CONFIG.repo.owner}/${CONFIG.repo.name}/contents/${CONFIG.repo.folder}/${filename}`;
                const res = await fetch(url, {
                    method: 'DELETE',
                    headers: this.headers,
                    body: JSON.stringify({
                        message: `Delete ${filename}`,
                        sha: file.sha,
                        branch: CONFIG.repo.branch
                    })
                });
                if (!res.ok) throw new Error('Erro ao deletar');
            }
        }

        const ghService = new GitHubService();

        function parseLoadedContent(fullHtml) {
            if (fullHtml.trim().toLowerCase().startsWith('<!doctype') || fullHtml.includes('<html')) {
                useTemplateCheckbox.checked = false;
                htmlArea.value = fullHtml;
                cssArea.value = '';
                jsArea.value = '';
            } else {
                useTemplateCheckbox.checked = true;
                const parser = new DOMParser();
                const doc = parser.parseFromString(fullHtml, 'text/html');
                
                const styleTag = doc.querySelector('head style');
                if (styleTag) {
                    cssArea.value = styleTag.innerHTML.trim();
                    styleTag.remove();
                } else cssArea.value = '';

                const scripts = doc.querySelectorAll('body script');
                let jsFound = false;
                scripts.forEach(script => {
                    if (script.innerHTML.trim()) {
                        jsArea.value = script.innerHTML.trim();
                        script.remove();
                        jsFound = true;
                    }
                });
                if (!jsFound) jsArea.value = '';

                htmlArea.value = doc.body.innerHTML.trim().replace(/^\s+|\s+$/g, '');
            }
            updatePreview();
        }

        async function loadFileList() {
            const listEl = document.getElementById('fileList');
            listEl.innerHTML = '<li style="padding:16px; color:#666">Carregando...</li>';
            try {
                const files = await ghService.listFiles();
                listEl.innerHTML = '';
                if (files.length === 0) {
                    listEl.innerHTML = '<li style="padding:16px">Nenhum arquivo.</li>';
                    return;
                }
                files.forEach(file => {
                    const li = document.createElement('li');
                    li.className = 'file-item';
                    li.innerHTML = `
                        <div>
                            <div class="file-name" onclick="loadFile('${file.name}')">${file.name}</div>
                            <small style="color:#555">${CONFIG.preview.baseUrl}/${CONFIG.repo.folder}/${file.name}</small>
                        </div>
                        <div class="actions">
                            <button onclick="loadFile('${file.name}')" class="btn-mini btn-edit">‚úèÔ∏è</button>
                            <button onclick="deleteFile('${file.name}')" class="btn-mini btn-del">üóëÔ∏è</button>
                        </div>`;
                    listEl.appendChild(li);
                });
            } catch (e) {
                listEl.innerHTML = '<li style="padding:16px; color:red">Erro ao listar arquivos.</li>';
            }
        }

        window.loadFile = async (filename) => {
            notify.show(`Carregando ${filename}...`, 'info');
            try {
                const data = await ghService.getFile(filename);
                filenameInput.value = filename;
                parseLoadedContent(data.content);
                notify.show('Arquivo carregado!', 'success');
            } catch (e) {
                notify.show(e.message, 'error');
            }
        };

        window.deleteFile = async (filename) => {
            if(!confirm(`Apagar ${filename} permanentemente?`)) return;
            notify.show(`Apagando ${filename}...`, 'info');
            try {
                await ghService.deleteFile(filename);
                await loadFileList();
                notify.show('Atualizando site...', 'info');
                await triggerRenderDeploy();
                notify.show('Arquivo removido.', 'success');
            } catch (e) {
                notify.show(e.message, 'error');
            }
        };

        const publishBtn = document.getElementById('publishBtn');
        publishBtn.addEventListener('click', async () => {
            const filename = filenameInput.value.trim();
            if (!filename.endsWith('.html')) {
                notify.show('O arquivo deve terminar em .html', 'error');
                return;
            }
            publishBtn.disabled = true;
            publishBtn.textContent = '‚è≥ Salvando...';
            try {
                const fullContent = buildFinalContent();
                await ghService.saveFile(filename, fullContent);
                notify.show('Enviando para o Render...', 'info');
                await triggerRenderDeploy();
                notify.show('Publicado! Aguarde 1 min.', 'success');
                await loadFileList();
            } catch (e) {
                notify.show(`Erro: ${e.message}`, 'error');
            } finally {
                publishBtn.disabled = false;
                publishBtn.textContent = 'üöÄ Publicar';
            }
        });

        document.getElementById('refreshBtn').addEventListener('click', loadFileList);
        
        document.getElementById('newBtn').addEventListener('click', () => {
            filenameInput.value = 'novo-arquivo.html';
            useTemplateCheckbox.checked = true;
            htmlArea.value = '<h1>Nova P√°gina</h1>';
            cssArea.value = 'body { font-family: sans-serif; }';
            jsArea.value = '';
            updatePreview();
            notify.show('Novo projeto iniciado', 'info');
        });

        (async () => {
            await ghService.init();
            if (ghService.token) {
                publishBtn.disabled = false;
                loadFileList();
                notify.show('Conectado ao htmls.site', 'success');
                htmlArea.value = '<h1>Bem vindo</h1>';
                updatePreview();
            }
        })();

    </script>
</body>
</html>
    <script>

    </script>
</body>
</html>
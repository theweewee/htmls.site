<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>perplexo.html</title>
    <style>
body { font-family: sans-serif; padding: 20px; background: #f0f0f0; } h1 { color: #333; }
    </style>
</head>
<body>
<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>App em um index.html</title>
  <style>
    :root {
      --bg: #0b1020;
      --panel: #121a33;
      --text: #e8eefc;
      --muted: #b8c2e0;
      --brand: #7aa2ff;
      --danger: #ff6b6b;
      --ok: #3ddc97;
      --border: rgba(255,255,255,.10);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 14px;
      --gap: 14px;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: var(--font);
      background: radial-gradient(1200px 600px at 20% -10%, rgba(122,162,255,.25), transparent 60%),
                  radial-gradient(1000px 500px at 80% 0%, rgba(61,220,151,.18), transparent 60%),
                  var(--bg);
      color: var(--text);
    }

    a { color: inherit; text-decoration: none; }
    button, input, textarea { font: inherit; }

    .shell {
      max-width: 980px;
      margin: 0 auto;
      padding: 22px;
      display: grid;
      gap: var(--gap);
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      padding: 14px 16px;
      background: rgba(18,26,51,.85);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
    }

    .brand {
      display: flex;
      align-items: baseline;
      gap: 10px;
    }
    .brand h1 { margin: 0; font-size: 18px; letter-spacing: .2px; }
    .brand small { color: var(--muted); }

    nav {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }
    .navlink {
      padding: 8px 10px;
      border: 1px solid var(--border);
      border-radius: 999px;
      color: var(--muted);
      background: rgba(255,255,255,.03);
    }
    .navlink.active {
      color: var(--text);
      border-color: rgba(122,162,255,.45);
      box-shadow: 0 0 0 3px rgba(122,162,255,.12);
    }

    main {
      padding: 16px;
      background: rgba(18,26,51,.78);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
      min-height: 420px;
    }

    .row { display: grid; grid-template-columns: 1.1fr .9fr; gap: var(--gap); }
    @media (max-width: 860px) { .row { grid-template-columns: 1fr; } }

    .panel {
      padding: 14px;
      border: 1px solid var(--border);
      border-radius: calc(var(--radius) - 4px);
      background: rgba(255,255,255,.03);
    }

    h2 { margin: 0 0 10px; font-size: 16px; }
    p { color: var(--muted); margin: 0 0 10px; line-height: 1.45; }

    .toolbar {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .field { display: grid; gap: 6px; margin-bottom: 10px; }
    label { color: var(--muted); font-size: 13px; }
    input[type="text"], textarea {
      width: 100%;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: rgba(10,16,32,.55);
      color: var(--text);
      outline: none;
    }
    textarea { min-height: 90px; resize: vertical; }

    .btns { display: flex; gap: 10px; flex-wrap: wrap; }
    .btn {
      border: 1px solid var(--border);
      background: rgba(255,255,255,.04);
      color: var(--text);
      padding: 9px 12px;
      border-radius: 12px;
      cursor: pointer;
    }
    .btn.primary {
      background: rgba(122,162,255,.16);
      border-color: rgba(122,162,255,.45);
    }
    .btn.danger {
      background: rgba(255,107,107,.10);
      border-color: rgba(255,107,107,.45);
    }
    .btn.ghost { background: transparent; }

    .list { display: grid; gap: 10px; }
    .item {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
      padding: 12px;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: rgba(255,255,255,.02);
    }
    .item h3 { margin: 0; font-size: 14px; }
    .item .meta { margin-top: 6px; font-size: 12px; color: var(--muted); }
    .item .actions { display: flex; gap: 8px; align-items: flex-start; }

    .badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid var(--border);
      color: var(--muted);
      font-size: 12px;
      background: rgba(255,255,255,.03);
    }

    .toast {
      position: fixed;
      right: 18px;
      bottom: 18px;
      max-width: 420px;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: rgba(18,26,51,.92);
      box-shadow: var(--shadow);
      color: var(--text);
      opacity: 0;
      transform: translateY(10px);
      transition: .2s ease;
      pointer-events: none;
    }
    .toast.show { opacity: 1; transform: translateY(0); }
    .toast small { color: var(--muted); display: block; margin-top: 2px; }

    footer {
      padding: 12px 16px;
      color: var(--muted);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: rgba(255,255,255,.02);
      font-size: 13px;
    }
    code.inline { background: rgba(255,255,255,.06); padding: 2px 6px; border-radius: 8px; border: 1px solid var(--border); }
  </style>
</head>

<body>
  <div class="shell">
    <header>
      <div class="brand">
        <h1>App (1 arquivo)</h1>
        <small>SPA + CRUD em localStorage</small>
      </div>
      <nav id="nav"></nav>
    </header>

    <main id="app" aria-live="polite"></main>

    <footer>
      Rotas: <span class="badge">#/</span> <span class="badge">#/itens</span> <span class="badge">#/sobre</span>
      <span style="margin-left:10px">Dados em <code class="inline">localStorage</code>.</span>
    </footer>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    // ========= Utils =========
    const $ = (sel, root = document) => root.querySelector(sel);

    function uid() {
      return Math.random().toString(16).slice(2) + "-" + Date.now().toString(16);
    }

    function nowISO() {
      return new Date().toISOString();
    }

    function fmtDate(iso) {
      try {
        return new Date(iso).toLocaleString();
      } catch {
        return iso;
      }
    }

    function toast(message, detail = "") {
      const el = $("#toast");
      el.innerHTML = `${escapeHtml(message)}${detail ? `<small>${escapeHtml(detail)}</small>` : ""}`;
      el.classList.add("show");
      clearTimeout(toast._t);
      toast._t = setTimeout(() => el.classList.remove("show"), 2200);
    }

    function escapeHtml(s) {
      return String(s)
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#039;");
    }

    // ========= Storage =========
    const STORAGE_KEY = "singlefile.items.v1";

    function loadItems() {
      const raw = localStorage.getItem(STORAGE_KEY);
      if (!raw) return [];
      try {
        const parsed = JSON.parse(raw);
        return Array.isArray(parsed) ? parsed : [];
      } catch {
        return [];
      }
    }

    function saveItems(items) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(items));
    }

    // ========= State =========
    const state = {
      items: loadItems(),
      editingId: null,
      query: ""
    };

    // ========= Router =========
    const routes = {
      "/": renderHome,
      "/itens": renderItens,
      "/sobre": renderSobre
    };

    const navLinks = [
      { href: "#/", label: "Home" },
      { href: "#/itens", label: "Itens" },
      { href: "#/sobre", label: "Sobre" }
    ];

    function currentPath() {
      const hash = location.hash || "#/";
      const path = hash.replace(/^#/, "");
      return path || "/";
    }

    function navigate(hash) {
      location.hash = hash;
    }

    function renderNav() {
      const path = currentPath();
      const nav = $("#nav");
      nav.innerHTML = navLinks.map(l => {
        const active = l.href === ("#" + path) ? "active" : "";
        return `<a class="navlink ${active}" href="${l.href}">${escapeHtml(l.label)}</a>`;
      }).join("");
    }

    function render() {
      const path = currentPath();
      const view = routes[path] || renderNotFound;
      renderNav();
      view();
    }

    window.addEventListener("hashchange", render);

    // ========= Views =========
    function renderHome() {
      $("#app").innerHTML = `
        <div class="panel">
          <h2>Bem-vindo</h2>
          <p>Este é um template de app em um único <code class="inline">index.html</code>, com rotas e CRUD local.</p>
          <div class="btns">
            <button class="btn primary" id="go-itens">Abrir Itens</button>
            <button class="btn" id="seed">Criar dados de exemplo</button>
            <button class="btn danger" id="wipe">Limpar dados</button>
          </div>
        </div>
      `;

      $("#go-itens").addEventListener("click", () => navigate("#/itens"));

      $("#seed").addEventListener("click", () => {
        if (state.items.length) {
          toast("Já existem itens", "Limpe antes se quiser.");
          return;
        }
        state.items = [
          { id: uid(), title: "Primeiro item", notes: "Exemplo de anotação.", createdAt: nowISO(), updatedAt: nowISO() },
          { id: uid(), title: "Segundo item", notes: "Você pode editar e excluir.", createdAt: nowISO(), updatedAt: nowISO() }
        ];
        saveItems(state.items);
        toast("Dados criados");
      });

      $("#wipe").addEventListener("click", () => {
        if (!confirm("Apagar todos os itens?")) return;
        state.items = [];
        state.editingId = null;
        state.query = "";
        saveItems(state.items);
        toast("Dados apagados");
      });
    }

    function renderItens() {
      const items = filteredItems();

      $("#app").innerHTML = `
        <div class="row">
          <section class="panel">
            <div class="toolbar">
              <div>
                <h2>Itens</h2>
                <p>${items.length} item(ns) exibido(s) • ${state.items.length} no total.</p>
              </div>
              <div class="btns">
                <button class="btn" id="new">Novo</button>
                <button class="btn ghost" id="export">Exportar JSON</button>
                <button class="btn ghost" id="import">Importar JSON</button>
              </div>
            </div>

            <div class="field">
              <label for="q">Buscar por título</label>
              <input id="q" type="text" placeholder="Ex.: relatório" value="${escapeHtml(state.query)}" />
            </div>

            <div class="list" id="list">
              ${items.length ? items.map(renderItemCard).join("") : `
                <div class="item">
                  <div>
                    <h3>Nenhum item</h3>
                    <div class="meta">Crie um item no formulário ao lado.</div>
                  </div>
                </div>
              `}
            </div>
          </section>

          <aside class="panel">
            <h2>${state.editingId ? "Editar item" : "Criar item"}</h2>
            <p>Validação mínima e persistência em <code class="inline">localStorage</code>.</p>

            <form id="form">
              <div class="field">
                <label for="title">Título</label>
                <input id="title" type="text" maxlength="80" required />
              </div>

              <div class="field">
                <label for="notes">Notas</label>
                <textarea id="notes" maxlength="1200" placeholder="Opcional"></textarea>
              </div>

              <div class="btns">
                <button class="btn primary" type="submit">${state.editingId ? "Salvar" : "Adicionar"}</button>
                <button class="btn" type="button" id="cancel" ${state.editingId ? "" : "disabled"}>Cancelar</button>
              </div>
            </form>

            <div style="margin-top:12px">
              <span class="badge">Dica</span>
              <p style="margin-top:8px">Para “virar seu app”, troque <code class="inline">Item</code> pela sua entidade e ajuste campos/regras.</p>
            </div>
          </aside>
        </div>
      `;

      // Wiring: search
      $("#q").addEventListener("input", (e) => {
        state.query = e.target.value;
        renderItens(); // simples: re-render total
      });

      // Wiring: list actions
      $("#list").addEventListener("click", (e) => {
        const btn = e.target.closest("button[data-action]");
        if (!btn) return;
        const id = btn.getAttribute("data-id");
        const action = btn.getAttribute("data-action");
        if (action === "edit") startEdit(id);
        if (action === "delete") deleteItem(id);
      });

      // Wiring: new
      $("#new").addEventListener("click", () => {
        state.editingId = null;
        renderItens();
        $("#title").focus();
      });

      // Wiring: export/import
      $("#export").addEventListener("click", () => {
        const json = JSON.stringify(state.items, null, 2);
        navigator.clipboard?.writeText(json).then(
          () => toast("JSON copiado", "Cole em um arquivo .json para salvar."),
          () => toast("Não foi possível copiar", "Copie manualmente no prompt a seguir.")
        );
        prompt("Copie o JSON:", json);
      });

      $("#import").addEventListener("click", () => {
        const raw = prompt("Cole o JSON de itens:");
        if (!raw) return;
        try {
          const parsed = JSON.parse(raw);
          if (!Array.isArray(parsed)) throw new Error("JSON precisa ser uma lista (array).");
          // normaliza minimamente
          state.items = parsed.map(x => ({
            id: String(x.id || uid()),
            title: String(x.title || "").slice(0, 80),
            notes: String(x.notes || "").slice(0, 1200),
            createdAt: x.createdAt || nowISO(),
            updatedAt: nowISO()
          })).filter(x => x.title.trim().length);

          saveItems(state.items);
          state.editingId = null;
          toast("Importado com sucesso", `${state.items.length} item(ns).`);
          renderItens();
        } catch (err) {
          toast("Import falhou", err.message || String(err));
        }
      });

      // Wiring: form
      const editing = state.editingId ? state.items.find(i => i.id === state.editingId) : null;
      if (editing) {
        $("#title").value = editing.title;
        $("#notes").value = editing.notes || "";
      }

      $("#form").addEventListener("submit", (e) => {
        e.preventDefault();
        const title = $("#title").value.trim();
        const notes = $("#notes").value.trim();

        if (!title) {
          toast("Título é obrigatório");
          $("#title").focus();
          return;
        }

        if (state.editingId) {
          const idx = state.items.findIndex(i => i.id === state.editingId);
          if (idx === -1) {
            toast("Item não encontrado");
            state.editingId = null;
            renderItens();
            return;
          }
          state.items[idx] = {
            ...state.items[idx],
            title,
            notes,
            updatedAt: nowISO()
          };
          saveItems(state.items);
          toast("Item atualizado");
        } else {
          state.items.unshift({
            id: uid(),
            title,
            notes,
            createdAt: nowISO(),
            updatedAt: nowISO()
          });
          saveItems(state.items);
          toast("Item criado");
        }

        state.editingId = null;
        renderItens();
      });

      $("#cancel").addEventListener("click", () => {
        state.editingId = null;
        renderItens();
      });
    }

    function renderItemCard(item) {
      return `
        <article class="item" data-id="${escapeHtml(item.id)}">
          <div>
            <h3>${escapeHtml(item.title)}</h3>
            <div class="meta">
              Atualizado: ${escapeHtml(fmtDate(item.updatedAt))}
              ${item.notes ? ` • <span class="badge">com notas</span>` : ""}
            </div>
          </div>
          <div class="actions">
            <button class="btn" data-action="edit" data-id="${escapeHtml(item.id)}">Editar</button>
            <button class="btn danger" data-action="delete" data-id="${escapeHtml(item.id)}">Excluir</button>
          </div>
        </article>
      `;
    }

    function renderSobre() {
      $("#app").innerHTML = `
        <div class="panel">
          <h2>Sobre</h2>
          <p>Este template é propositalmente “simples”: um arquivo, rotas por hash e persistência local.</p>
          <p>Se você me disser como é o seu app original (telas e dados), dá para adaptar este esqueleto e recriar o comportamento.</p>
          <div class="btns">
            <button class="btn primary" id="go">Ir para Itens</button>
          </div>
        </div>
      `;
      $("#go").addEventListener("click", () => navigate("#/itens"));
    }

    function renderNotFound() {
      $("#app").innerHTML = `
        <div class="panel">
          <h2>Rota não encontrada</h2>
          <p>Tente <code class="inline">#/</code> ou <code class="inline">#/itens</code>.</p>
          <div class="btns">
            <button class="btn primary" id="home">Voltar</button>
          </div>
        </div>
      `;
      $("#home").addEventListener("click", () => navigate("#/"));
    }

    // ========= Actions =========
    function filteredItems() {
      const q = state.query.trim().toLowerCase();
      if (!q) return state.items;
      return state.items.filter(i => (i.title || "").toLowerCase().includes(q));
    }

    function startEdit(id) {
      state.editingId = id;
      renderItens();
      $("#title").focus();
    }

    function deleteItem(id) {
      const item = state.items.find(i => i.id === id);
      if (!item) return toast("Item não encontrado");
      if (!confirm(`Excluir "${item.title}"?`)) return;
      state.items = state.items.filter(i => i.id !== id);
      saveItems(state.items);
      if (state.editingId === id) state.editingId = null;
      toast("Item excluído");
      renderItens();
    }

    // ========= Boot =========
    if (!location.hash) location.hash = "#/";
    render();
  </script>
</body>
</html>

    <script>
console.log("Página carregada");
    </script>
</body>
</html>